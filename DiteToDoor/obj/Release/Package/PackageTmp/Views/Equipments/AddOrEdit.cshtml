@model DataMapping.Entites.Cars

@{
    ViewBag.Title = DataMapping.Resources.Resource.Vendor;
}

<style>
    .col-form-label {
        font-size: 14px !important;
        font-weight: 600;
        color: #34395e !important;
        margin-bottom: 8px;
    }
</style>
@using (Html.BeginForm("AddOrEdit", "Equipments", FormMethod.Post, new { @class = "form-horizontal", @id = "ModalForm" }))

{
    if (Model != null)
    {
        if (Model.ReleaseDate != null)
        {
            <input id="ReleaseDatee" hidden value="@Model.ReleaseDate.Value.Date">

        }

        if (Model.EndDate != null)
        {
            <input id="EndDatee" hidden value="@Model.EndDate.Value.Date">

        }

        if (Model.PurchaseDate != null)
        {
            <input id="PurchaseDatee" hidden value="@Model.PurchaseDate.Value.Date">

        }

        if (Model.ServiceDate != null)
        {
            <input id="ServiceDatee" hidden value="@Model.ServiceDate.Value.Date">

        }


    }
    else
    {
        <input id="ReleaseDatee" hidden value="1">
        <input id="EndDatee" hidden value="1">
        <input id="PurchaseDatee" hidden value="1">
        <input id="ServiceDatee" hidden value="1">

    }
    <div class="row heder_title">
        <div class="col-6">
            <h3 class="blockquote">المعدات</h3>
        </div>
        <div class="col-6 text-left">

            <button type="submit" class="btn btn-icon icon-left btn-info">
                @DataMapping.Resources.Resource.save <i class="fa fa-save" aria-hidden="true"></i>
            </button>
            <a href="~/Equipments/Index" class="btn btn-icon icon-left btn-outline-warning">
                رجوع <i class="fa fa-chevron-left" aria-hidden="true"></i>
            </a>
        </div>
    </div>


    <div class="card-layout">
        <p style="color:red; font-size:10px;">@Session["msgErrV"]</p>
        <div class="row">
            <label class="col-sm-2 col-form-label">
                رقم المعدة
            </label>
            <div class="col-sm-4">
                @if (Model != null)
                {
                    @Html.EditorFor(model => model.CarNo, new { htmlAttributes = new { Value = ViewBag.autoCode, @class = "form-control", @readonly = "readonly" } })
                    @Html.ValidationMessageFor(model => model.CarNo, "", new { @class = "text-danger" })
                }
                else
                {
                    @Html.EditorFor(model => model.CarNo, new { htmlAttributes = new { Value = ViewBag.autoCode, @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.CarNo, "", new { @class = "text-danger" })
                }
            </div>

            <label class="col-sm-2 col-form-label">
                رقم اللوحة
            </label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.PanelNo, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.PanelNo, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">
                رقم الشاسيه
            </label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.ChassisNo, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.ChassisNo, "", new { @class = "text-danger" })
            </div>
            <label class="col-sm-2 col-form-label">
                الموديل
            </label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.ModelNo, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.ModelNo, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">
                النوع
            </label>
            <div class="col-sm-4">
                @Html.DropDownList("CarTypeId", null, "... أختر  ...", new { @id = "CarTypeId", @class = "CarTypeId form-control select2" })
                @Html.ValidationMessageFor(model => model.CarTypeId, "", new { @class = "text-danger" })

            </div>
            @*<label class="col-sm-3 col-form-label">
                الموديل
                @Html.EditorFor(model => model.ModelNo, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.ModelNo, "", new { @class = "text-danger" })
            </label>

            <label class="col-sm-3 col-form-label">
                النوع
                @Html.DropDownList("CarTypeId", null, "... أختر  ...", new { @id = "CarTypeId", @class = "CarTypeId form-control select2" })
                @Html.ValidationMessageFor(model => model.CarTypeId, "", new { @class = "text-danger" })
            </label>*@

            <label class="col-sm-2 col-form-label">اللون</label>
            <div class="col-sm-4">
                @Html.DropDownList("ColorId", null, "... أختر  ...", new { @id = "ColorId", @class = "ColorId form-control select2" })
                @Html.ValidationMessageFor(model => model.ColorId, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">القوة بالحصان</label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.Horsepower, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Horsepower, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">رقم الاستمارة</label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.CarLicenseNo, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.CarLicenseNo, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">نوع التسجيل</label>
            <div class="col-sm-4">
                @Html.DropDownList("RegisterTypeId", null, "... أختر  ...", new { @id = "RegisterTypeId", @class = "RegisterTypeId form-control select2" })
                @Html.ValidationMessageFor(model => model.RegisterTypeId, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">تاريخ الاصدار</label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.ReleaseDate, new { htmlAttributes = new { @class = "DateChange form-control", Value = ViewBag.AutoDate, type = "date", @data_date = ViewBag.AutoDate, @data_date_format = "YYYY/MM/DD", @id = "ReleaseDate" } })
                @Html.ValidationMessageFor(model => model.ReleaseDate, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">تاريخ الانتهاء</label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.EndDate, new { htmlAttributes = new { @class = "DateChange form-control", Value = ViewBag.AutoDate, type = "date", @data_date = ViewBag.AutoDate, @data_date_format = "YYYY/MM/DD", @id = "EndDate" } })
                @Html.ValidationMessageFor(model => model.EndDate, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">جهة الاصدار</label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.ReleasePlace, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.ReleasePlace, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">الشركة الموردة</label>
            <div class="col-sm-4">
                @Html.DropDownList("SupplierId", null, "... اختار  ...", new { @id = "RegisterTypeId", @class = "RegisterTypeId form-control select2" })
                @*@Html.ValidationMessageFor(model => model.SupplierId, "", new { @class = "text-danger" })*@
            </div>

            <label class="col-sm-2 col-form-label">تاريخ الشراء</label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.PurchaseDate, new { htmlAttributes = new { @class = "DateChange form-control", Value = ViewBag.AutoDate, type = "date", @data_date = ViewBag.AutoDate, @data_date_format = "YYYY/MM/DD", @id = "PurchaseDate" } })
                @Html.ValidationMessageFor(model => model.PurchaseDate, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">مدة الضمان</label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.WarrantyPeriod, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.WarrantyPeriod, "", new { @class = "text-danger" })
            </div>


            <label class="col-sm-2 col-form-label">تاريخ دخول الخدمة</label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.ServiceDate, new { htmlAttributes = new { @class = "DateChange form-control", Value = ViewBag.AutoDate, type = "date", @data_date = ViewBag.AutoDate, @data_date_format = "YYYY/MM/DD", @id = "ServiceDate" } })
                @Html.ValidationMessageFor(model => model.ServiceDate, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">حالة المعدة</label>
            <div class="col-sm-4">
                @Html.DropDownList("ConditionId", null, "... أختر  ...", new { @id = "ConditionId", @class = "ConditionId form-control select2" })
                @Html.ValidationMessageFor(model => model.ConditionId, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">كمية الوقود</label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.ReplaceOil, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.ReplaceOil, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">لكل</label>
            <div class="col-sm-4">
                @Html.DropDownList("PeriodType", null, "... أختر  ...", new { @id = "RegisterTypeId", @class = "RegisterTypeId form-control select2" })
                @Html.ValidationMessageFor(model => model.PeriodType, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">تغيير زيت كل</label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.MonthlyFuel, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.MonthlyFuel, "", new { @class = "text-danger" })
            </div>

            <label class="col-sm-2 col-form-label">الحد المسموح لتغيير الزيت</label>
            <div class="col-sm-4">
                @Html.EditorFor(model => model.ReplaceOilLimit, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.MonthlyFuel, "", new { @class = "text-danger" })
            </div>
        </div>
      
    </div>
}
@section ModelPopup{

}
@section JavaScriptSection{
    <script>
        $(document).ready(function () {

            if ($("#ReleaseDatee").val() == 1) {
                var date = new Date();

                var day = date.getDate();
                var month = date.getMonth() + 1;
                var year = date.getFullYear();

                if (month < 10) month = "0" + month;
                if (day < 10) day = "0" + day;

                var today = year + "-" + month + "-" + day;
                $("#ReleaseDate").attr("value", today);
            }

            else {
                var date = new Date($("#ReleaseDatee").val());

                var day = date.getDate();
                var month = date.getMonth() + 1;
                var year = date.getFullYear();

                if (month < 10) month = "0" + month;
                if (day < 10) day = "0" + day;

                var today = year + "-" + month + "-" + day;
                $("#ReleaseDate").attr("value", today);
            }







            if ($("#EndDatee").val() == 1) {
                var date = new Date();

                var day = date.getDate();
                var month = date.getMonth() + 1;
                var year = date.getFullYear();

                if (month < 10) month = "0" + month;
                if (day < 10) day = "0" + day;

                var today = year + "-" + month + "-" + day;
                $("#EndDate").attr("value", today);
            }

            else {
                var date = new Date($("#EndDatee").val());

                var day = date.getDate();
                var month = date.getMonth() + 1;
                var year = date.getFullYear();

                if (month < 10) month = "0" + month;
                if (day < 10) day = "0" + day;

                var today = year + "-" + month + "-" + day;
                $("#EndDate").attr("value", today);
            }







            if ($("#PurchaseDatee").val() == 1) {
                var date = new Date();

                var day = date.getDate();
                var month = date.getMonth() + 1;
                var year = date.getFullYear();

                if (month < 10) month = "0" + month;
                if (day < 10) day = "0" + day;

                var today = year + "-" + month + "-" + day;
                $("#PurchaseDate").attr("value", today);
            }

            else {
                var date = new Date($("#PurchaseDatee").val());

                var day = date.getDate();
                var month = date.getMonth() + 1;
                var year = date.getFullYear();

                if (month < 10) month = "0" + month;
                if (day < 10) day = "0" + day;

                var today = year + "-" + month + "-" + day;
                $("#PurchaseDate").attr("value", today);
            }







            if ($("#ServiceDatee").val() == 1) {
                var date = new Date();

                var day = date.getDate();
                var month = date.getMonth() + 1;
                var year = date.getFullYear();

                if (month < 10) month = "0" + month;
                if (day < 10) day = "0" + day;

                var today = year + "-" + month + "-" + day;
                $("#ServiceDate").attr("value", today);
            }

            else {
                var date = new Date($("#ServiceDatee").val());

                var day = date.getDate();
                var month = date.getMonth() + 1;
                var year = date.getFullYear();

                if (month < 10) month = "0" + month;
                if (day < 10) day = "0" + day;

                var today = year + "-" + month + "-" + day;
                $("#ServiceDate").attr("value", today);
            }



        });
    </script>
}